<!--
  Generated template for the AnnoncesOnMapPage page.

  See http://ionicframework.com/docs/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header>

    <ion-navbar>
        <ion-title *ngIf="type != undefined"> {{'annonce_map.map_title' | translate}} {{type.name}}</ion-title>
        <ion-title *ngIf="type == undefined"> {{'annonce_map.map_title' | translate}}</ion-title>
    </ion-navbar>

</ion-header>


<ion-content>

    <agm-map [styles]="mapStyles" [zoom]="12" *ngIf="currentPosition == undefined" [latitude]="annoncesList[0].lat" [longitude]="annoncesList[0].lng">
        <agm-marker *ngFor="let data of annoncesList | slice:0:20; let i = index" (markerClick)="openWindow(data.id,data)" [iconUrl]="'assets/icon/pos.png'" [latitude]="data.lat" [longitude]="data.lng">
            <agm-info-window [isOpen]="isInfoWindowOpen(data.id)" [latitude]="data?.lat" [longitude]="data?.lng">{{data?.title?.rendered}}</agm-info-window>
        </agm-marker>
    </agm-map>
    <agm-map [styles]="mapStyles" [zoom]="12" *ngIf="currentPosition != undefined" [latitude]="currentPosition.latitude" [longitude]="currentPosition.longitude">
        <agm-marker *ngFor="let data of annoncesList | slice:0:20; let i = index" (markerClick)="openWindow(data.id,data)" [iconUrl]="'assets/icon/pos.png'" [latitude]="data.lat" [longitude]="data.lng">
            <agm-info-window [isOpen]="isInfoWindowOpen(data.id)" [latitude]="data?.lat" [longitude]="data?.lng">{{data?.title?.rendered}}</agm-info-window>
        </agm-marker>
    </agm-map>
</ion-content>